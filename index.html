<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DARK SERAPH 2 / Break the Seal – Block Breaker</title>
<style>
html,body{margin:0;background:#070812;color:#e9ecff;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans JP",sans-serif}
.wrap{display:flex;justify-content:center;padding:20px}
.game{width:min(900px,100%);background:#0b0d16;border-radius:16px;overflow:hidden;box-shadow:0 20px 60px rgba(0,0,0,.6)}
header{display:flex;justify-content:space-between;align-items:center;padding:14px;border-bottom:1px solid #222}
header h1{font-size:16px;margin:0}
.btns button{margin-left:6px}
button{background:#131a2d;color:#fff;border:1px solid #2c3456;border-radius:10px;padding:8px 12px;cursor:pointer}
canvas{display:block;width:100%;background:#05060b}
.overlay{position:absolute;inset:0;background:rgba(0,0,0,.6);display:flex;justify-content:center;align-items:center}
.modal{background:#0f1321;border-radius:14px;padding:16px;max-width:720px;width:92%}
.chars{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;margin-top:12px}
.char{background:#131a2d;border-radius:12px;padding:10px;cursor:pointer;text-align:center}
.char:hover{background:#1b2540}
.hud{display:flex;gap:10px;padding:10px;font-size:12px}
</style>
</head>
<body>
<div class="wrap">
<div class="game">
<header>
<h1>DARK SERAPH 2 / Break the Seal</h1>
<div class="btns">
<button onclick="restart()">Restart</button>
</div>
</header>

<div class="hud">
<div>CHAR: <span id="hudChar">—</span></div>
<div>SCORE: <span id="hudScore">0</span></div>
</div>

<div style="position:relative">
<canvas id="game" width="900" height="500"></canvas>

<div class="overlay" id="overlay">
<div class="modal">
<p>キャラを選んで開始</p>
<div class="chars">
<div class="char" onclick="pick('ARIA')">Aria</div>
<div class="char" onclick="pick('DESIRA')">Desira</div>
<div class="char" onclick="pick('MIREA')">Mirea</div>
</div>
</div>
</div>
</div>

</div>
</div>

<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
const overlay = document.getElementById('overlay');
const hudChar = document.getElementById('hudChar');
const hudScore = document.getElementById('hudScore');

let running=false;
let score=0;
let charName='';

let paddle={x:450,w:120};
let ball={x:450,y:250,vx:4,vy:-4};

function pick(c){
  charName=c;
  hudChar.textContent=c;
  overlay.style.display='none';
  running=true;
}

function restart(){
  score=0;
  hudScore.textContent=0;
  ball.x=450; ball.y=250;
  running=!!charName;
}

canvas.addEventListener('mousemove',e=>{
  const r=canvas.getBoundingClientRect();
  paddle.x=(e.clientX-r.left)/r.width*canvas.width;
});

function step(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle='#6ad1ff';
  ctx.fillRect(paddle.x-paddle.w/2,460,paddle.w,10);

  if(running){
    ball.x+=ball.vx;
    ball.y+=ball.vy;
    if(ball.x<5||ball.x>895) ball.vx*=-1;
    if(ball.y<5) ball.vy*=-1;
    if(ball.y>450 && ball.x>paddle.x-paddle.w/2 && ball.x<paddle.x+paddle.w/2){
      ball.vy*=-1; score+=10; hudScore.textContent=score;
    }
    if(ball.y>520){ running=false; overlay.style.display='flex'; }
  }

  ctx.fillStyle='#fff';
  ctx.beginPath();
  ctx.arc(ball.x,ball.y,6,0,Math.PI*2);
  ctx.fill();

  requestAnimationFrame(step);
}
step();
</script>
</body>
</html>
